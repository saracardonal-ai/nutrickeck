<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriCheck - Escáner Nutricional</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- QuaggaJS for barcode scanning -->
    <script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>
    <!-- Chart.js for BMI visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #7EC8E3;
            --secondary-color: #FFB6C1;
            --accent-color: #98D8C8;
            --highlight-color: #FFF8DC;
            --light-purple: #DDA0DD;
            --dark-purple: #9370DB;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-4: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --gradient-5: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --gradient-6: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
            --gradient-bmi: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --text-color: #6C757D;
            --dark-text: #2C3E50;
            --white: #FFFFFF;
            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-md: 0 8px 15px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 15px 35px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(126, 200, 227, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 182, 193, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(152, 216, 200, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        /* Floating Elements */
        .floating-shapes {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
            pointer-events: none;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: float 20s infinite ease-in-out;
        }

        .shape1 {
            width: 80px;
            height: 80px;
            background: var(--primary-color);
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape2 {
            width: 60px;
            height: 60px;
            background: var(--secondary-color);
            top: 70%;
            right: 10%;
            animation-delay: 2s;
        }

        .shape3 {
            width: 100px;
            height: 100px;
            background: var(--accent-color);
            bottom: 10%;
            left: 30%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(20px) rotate(240deg); }
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-md);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 2rem;
            font-weight: 800;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo i {
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-right: 10px;
            font-size: 2.5rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--gradient-3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .user-avatar:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        main {
            padding: 3rem 0;
            min-height: calc(100vh - 100px);
        }

        .app-container {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .app-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .registration-container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .registration-header {
            background: var(--gradient-3);
            padding: 3rem 2rem;
            text-align: center;
            color: var(--white);
            position: relative;
            overflow: hidden;
        }

        .registration-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 30s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .registration-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .registration-header p {
            font-size: 1.2rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .registration-form {
            padding: 3rem;
        }

        .form-section {
            margin-bottom: 2.5rem;
        }

        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            color: var(--dark-text);
            font-weight: 600;
            font-size: 1.3rem;
        }

        .section-title i {
            margin-right: 12px;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.5rem;
        }

        .form-row {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-group {
            flex: 1;
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark-text);
        }

        .form-control {
            width: 100%;
            padding: 1rem 1.2rem;
            border: 2px solid rgba(126, 200, 227, 0.2);
            border-radius: 15px;
            font-size: 1rem;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.8);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(126, 200, 227, 0.1);
            transform: translateY(-2px);
        }

        .checkbox-group, .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .checkbox-item, .radio-item {
            display: flex;
            align-items: center;
            background: rgba(126, 200, 227, 0.05);
            padding: 1rem 1.2rem;
            border-radius: 15px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .checkbox-item:hover, .radio-item:hover {
            background: rgba(126, 200, 227, 0.1);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .checkbox-item input, .radio-item input {
            margin-right: 0.5rem;
        }

        .diet-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .diet-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition-slow);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .diet-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-4);
            opacity: 0;
            transition: var(--transition);
        }

        .diet-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }

        .diet-card.selected {
            border-color: var(--accent-color);
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .diet-card.selected::before {
            opacity: 0.1;
        }

        .diet-card i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: var(--gradient-4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
        }

        .diet-card h3 {
            color: var(--dark-text);
            font-weight: 600;
            position: relative;
            z-index: 1;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            margin-top: 2.5rem;
        }

        .btn {
            padding: 1rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            display: inline-block;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--gradient-3);
            color: var(--white);
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--gradient-5);
            color: var(--white);
            margin-left: 1rem;
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .allergy-input {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .allergy-input input {
            flex: 1;
        }

        .add-allergy-btn {
            background: var(--gradient-2);
            color: var(--white);
            border: none;
            border-radius: 15px;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }

        .add-allergy-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .allergy-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1rem;
        }

        .allergy-tag {
            background: var(--gradient-5);
            color: var(--white);
            padding: 0.6rem 1.2rem;
            border-radius: 50px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            font-weight: 500;
            box-shadow: var(--shadow-sm);
        }

        .allergy-tag i {
            margin-left: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .allergy-tag i:hover {
            transform: scale(1.2);
        }

        /* BMI Calculator Section */
        .bmi-calculator {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 2.5rem;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 2rem;
            animation: slideUp 0.8s ease-out;
        }

        .bmi-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .bmi-header h2 {
            color: var(--dark-text);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: var(--gradient-bmi);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .bmi-header p {
            color: var(--text-color);
            font-size: 1.1rem;
        }

        .bmi-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .bmi-input-group {
            background: rgba(126, 200, 227, 0.05);
            padding: 1.5rem;
            border-radius: 20px;
            border: 2px solid rgba(126, 200, 227, 0.1);
            transition: var(--transition);
        }

        .bmi-input-group:hover {
            background: rgba(126, 200, 227, 0.1);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .bmi-input-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: var(--dark-text);
            font-size: 1.1rem;
        }

        .bmi-input-group input {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(126, 200, 227, 0.2);
            border-radius: 15px;
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.8);
            transition: var(--transition);
        }

        .bmi-input-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(126, 200, 227, 0.1);
        }

        .bmi-input-group .unit {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-color);
            font-weight: 500;
            pointer-events: none;
        }

        .bmi-result {
            background: var(--gradient-bmi);
            border-radius: 25px;
            padding: 2.5rem;
            text-align: center;
            color: var(--white);
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .bmi-result::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 40s linear infinite;
        }

        .bmi-value {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .bmi-category {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .bmi-description {
            font-size: 1.1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            max-width: 600px;
            margin: 0 auto;
        }

        .bmi-chart-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow-md);
            margin-bottom: 2rem;
        }

        .bmi-chart-title {
            text-align: center;
            color: var(--dark-text);
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .bmi-recommendations {
            background: rgba(126, 200, 227, 0.05);
            border-radius: 20px;
            padding: 2rem;
            border: 2px solid rgba(126, 200, 227, 0.1);
        }

        .bmi-recommendations h3 {
            color: var(--dark-text);
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .recommendation-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .recommendation-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            border-color: var(--accent-color);
        }

        .recommendation-card i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: var(--gradient-4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .recommendation-card h4 {
            color: var(--dark-text);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
        }

        .recommendation-card p {
            color: var(--text-color);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Scanner Section Styles */
        .scanner-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            animation: fadeIn 0.8s ease-out;
        }

        .scanner-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 2.5rem;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideUp 0.8s ease-out;
        }

        .scanner-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .scanner-header h2 {
            color: var(--dark-text);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .scanner-modes {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            background: rgba(126, 200, 227, 0.05);
            border-radius: 20px;
            padding: 0.5rem;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
        }

        .mode-btn {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 15px;
            background: transparent;
            color: var(--text-color);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .mode-btn.active {
            background: var(--gradient-3);
            color: var(--white);
            box-shadow: var(--shadow-md);
            transform: scale(1.02);
        }

        .mode-btn:not(.active):hover {
            background: rgba(126, 200, 227, 0.1);
        }

        .scanner-area {
            background: var(--gradient-6);
            border-radius: 25px;
            padding: 2.5rem;
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: var(--shadow-lg);
        }

        .scanner-area::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.05) 0%, transparent 70%);
            animation: rotate 40s linear infinite;
        }

        .camera-view {
            position: relative;
            width: 100%;
            height: 280px;
            background: #000;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            display: none;
            box-shadow: var(--shadow-lg);
        }

        .camera-view.active {
            display: block;
            animation: cameraFadeIn 0.5s ease-out;
        }

        @keyframes cameraFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        #camera-container {
            width: 100%;
            height: 100%;
        }

        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .scan-region {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 250px;
            height: 120px;
            border: 3px solid rgba(152, 216, 200, 0.8);
            border-radius: 15px;
            box-shadow: 0 0 0 1000px rgba(0, 0, 0, 0.3);
        }

        .scan-region::before,
        .scan-region::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            border: 4px solid var(--accent-color);
        }

        .scan-region::before {
            top: -4px;
            left: -4px;
            border-right: none;
            border-bottom: none;
        }

        .scan-region::after {
            bottom: -4px;
            right: -4px;
            border-left: none;
            border-top: none;
        }

        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }

        .scanner-icon {
            font-size: 5rem;
            color: var(--white);
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        .scanner-text {
            color: var(--white);
            font-size: 1.3rem;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
            font-weight: 500;
        }

        .barcode-input {
            background: rgba(255, 255, 255, 0.95);
            border: none;
            border-radius: 15px;
            padding: 1.2rem;
            font-size: 1.1rem;
            width: 100%;
            margin-bottom: 1.5rem;
            text-align: center;
            display: none;
            box-shadow: var(--shadow-md);
        }

        .barcode-input.active {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .scan-btn {
            background: var(--gradient-4);
            color: var(--white);
            border: none;
            border-radius: 15px;
            padding: 1.2rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .scan-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .scan-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .scan-btn:hover::before {
            left: 100%;
        }

        .camera-controls {
            display: none;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .camera-controls.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .camera-btn {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .start-camera {
            background: var(--gradient-4);
            color: var(--white);
        }

        .stop-camera {
            background: var(--gradient-2);
            color: var(--white);
        }

        .camera-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .recent-scans {
            margin-top: 2.5rem;
        }

        .recent-scans h3 {
            color: var(--dark-text);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .scan-history {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .scan-item {
            background: rgba(126, 200, 227, 0.05);
            padding: 1.2rem 1.5rem;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .scan-item:hover {
            background: rgba(126, 200, 227, 0.1);
            transform: translateX(5px);
            box-shadow: var(--shadow-sm);
        }

        .scan-item-name {
            font-weight: 500;
            color: var(--dark-text);
        }

        .scan-item-date {
            font-size: 0.9rem;
            color: var(--text-color);
        }

        /* Product Information Section */
        .product-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 2.5rem;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: none;
            animation: slideUp 0.8s ease-out;
        }

        .product-section.active {
            display: block;
        }

        .product-header {
            display: flex;
            align-items: center;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(126, 200, 227, 0.1);
        }

        .product-image {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            background: var(--gradient-5);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 2rem;
            box-shadow: var(--shadow-md);
        }

        .product-image i {
            font-size: 3.5rem;
            color: var(--white);
        }

        .product-title {
            flex: 1;
        }

        .product-title h2 {
            color: var(--dark-text);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .product-title p {
            color: var(--text-color);
            font-size: 1.1rem;
        }

        .status-badge {
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            box-shadow: var(--shadow-sm);
        }

        .status-safe {
            background: var(--gradient-4);
            color: var(--white);
        }

        .status-warning {
            background: var(--gradient-5);
            color: var(--white);
        }

        .status-danger {
            background: var(--gradient-2);
            color: var(--white);
        }

        .product-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2.5rem;
            border-bottom: 2px solid rgba(126, 200, 227, 0.1);
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 1.2rem 2rem;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-color);
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
            position: relative;
        }

        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-btn::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-3);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .tab-btn.active::after {
            transform: scaleX(1);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .nutrition-item {
            background: rgba(126, 200, 227, 0.05);
            padding: 1.5rem;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .nutrition-item:hover {
            background: rgba(126, 200, 227, 0.1);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .nutrition-label {
            font-weight: 500;
            color: var(--dark-text);
            font-size: 1rem;
        }

        .nutrition-value {
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.1rem;
        }

        .ingredients-list {
            background: rgba(126, 200, 227, 0.05);
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
        }

        .ingredients-list h4 {
            color: var(--dark-text);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .ingredient-tag {
            display: inline-block;
            background: rgba(255, 255, 255, 0.8);
            padding: 0.8rem 1.2rem;
            border-radius: 50px;
            margin: 0.5rem;
            font-size: 0.95rem;
            color: var(--dark-text);
            border: 2px solid rgba(126, 200, 227, 0.2);
            transition: var(--transition);
        }

        .ingredient-tag:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .ingredient-tag.allergen {
            background: var(--gradient-2);
            color: var(--white);
            border-color: transparent;
            font-weight: 500;
        }

        .allergy-alert {
            background: var(--gradient-2);
            border-left: 5px solid var(--secondary-color);
            padding: 1.5rem 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            box-shadow: var(--shadow-md);
        }

        .allergy-alert i {
            color: var(--white);
            font-size: 1.8rem;
            margin-right: 1.5rem;
        }

        .allergy-alert p {
            color: var(--white);
            font-weight: 500;
            font-size: 1.1rem;
        }

        .alternatives-section {
            margin-top: 2rem;
        }

        .alternatives-section h3 {
            color: var(--dark-text);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .alternatives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .alternative-card {
            background: rgba(126, 200, 227, 0.05);
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .alternative-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            background: rgba(126, 200, 227, 0.1);
        }

        .alternative-card img {
            width: 100px;
            height: 100px;
            border-radius: 15px;
            margin-bottom: 1rem;
        }

        .alternative-card h4 {
            color: var(--dark-text);
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .alternative-card p {
            color: var(--text-color);
            font-size: 0.95rem;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.5rem 2rem;
            border-radius: 15px;
            box-shadow: var(--shadow-xl);
            display: none;
            align-items: center;
            z-index: 1000;
            border-left: 5px solid var(--accent-color);
            animation: slideInRight 0.5s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success {
            border-left-color: var(--accent-color);
        }

        .notification.error {
            border-left-color: var(--secondary-color);
        }

        .notification i {
            margin-right: 1.5rem;
            font-size: 1.8rem;
        }

        .notification.success i {
            color: var(--accent-color);
        }

        .notification.error i {
            color: var(--secondary-color);
        }

        .camera-permission-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .camera-permission-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .permission-modal {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 3rem;
            max-width: 450px;
            text-align: center;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: scaleIn 0.3s ease-out;
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .permission-modal i {
            font-size: 4rem;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
        }

        .permission-modal h3 {
            color: var(--dark-text);
            margin-bottom: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .permission-modal p {
            color: var(--text-color);
            margin-bottom: 2rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .permission-btn {
            background: var(--gradient-3);
            color: var(--white);
            border: none;
            border-radius: 50px;
            padding: 1rem 2.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1rem;
            box-shadow: var(--shadow-md);
        }

        .permission-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .bmi-inputs {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .scanner-container {
                grid-template-columns: 1fr;
            }

            .nutrition-grid {
                grid-template-columns: 1fr;
            }

            .alternatives-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .scan-region {
                width: 200px;
                height: 100px;
            }

            .registration-header h1 {
                font-size: 2rem;
            }

            .scanner-header h2 {
                font-size: 1.8rem;
            }

            .bmi-value {
                font-size: 3rem;
            }

            .bmi-category {
                font-size: 1.5rem;
            }

            .recommendation-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Background Elements -->
    <div class="floating-shapes">
        <div class="shape shape1"></div>
        <div class="shape shape2"></div>
        <div class="shape shape3"></div>
    </div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-check-circle"></i>
                    NutriCheck
                </div>
                <div class="user-info" id="userInfo" style="display: none;">
                    <span id="userName">Usuario</span>
                    <div class="user-avatar" id="userAvatar">U</div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- Registration Form -->
            <div class="registration-container" id="registrationContainer">
                <div class="registration-header">
                    <h1>Únete a NutriCheck</h1>
                    <p>Regístrate para recibir recomendaciones personalizadas y un seguimiento de tu alimentación</p>
                </div>

                <form class="registration-form" id="registrationForm">
                    <div class="form-section">
                        <h2 class="section-title">
                            <i class="fas fa-user"></i>
                            Información Personal
                        </h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">Nombre</label>
                                <input type="text" id="firstName" class="form-control" placeholder="Tu nombre" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Apellido</label>
                                <input type="text" id="lastName" class="form-control" placeholder="Tu apellido" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="email">Correo Electrónico</label>
                                <input type="email" id="email" class="form-control" placeholder="tu@email.com" required>
                            </div>
                            <div class="form-group">
                                <label for="password">Contraseña</label>
                                <input type="password" id="password" class="form-control" placeholder="Crea una contraseña segura" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2 class="section-title">
                            <i class="fas fa-weight"></i>
                            Datos Físicos y IMC
                        </h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="weight">Peso (kg)</label>
                                <input type="number" id="weight" class="form-control" placeholder="Ej: 70" step="0.1" min="1" required>
                            </div>
                            <div class="form-group">
                                <label for="height">Altura (cm)</label>
                                <input type="number" id="height" class="form-control" placeholder="Ej: 175" min="1" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="age">Edad</label>
                                <input type="number" id="age" class="form-control" placeholder="Ej: 25" min="1" max="120" required>
                            </div>
                            <div class="form-group">
                                <label for="gender">Género</label>
                                <select id="gender" class="form-control" required>
                                    <option value="" disabled selected>Selecciona una opción</option>
                                    <option value="male">Masculino</option>
                                    <option value="female">Femenino</option>
                                    <option value="other">Otro</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2 class="section-title">
                            <i class="fas fa-exclamation-triangle"></i>
                            Alergias e Intolerancias
                        </h2>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="lactose" name="allergies" value="lactose">
                                <label for="lactose">Lactosa</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="gluten" name="allergies" value="gluten">
                                <label for="gluten">Gluten</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="nuts" name="allergies" value="nuts">
                                <label for="nuts">Frutos secos</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="seafood" name="allergies" value="seafood">
                                <label for="seafood">Mariscos</label>
                            </div>
                        </div>
                        
                        <div class="form-group" style="margin-top: 1.5rem;">
                            <label for="otherAllergies">Otras alergias o intolerancias</label>
                            <div class="allergy-input">
                                <input type="text" id="otherAllergies" class="form-control" placeholder="Añade otra alergia">
                                <button type="button" class="add-allergy-btn" id="addAllergyBtn">
                                    <i class="fas fa-plus"></i> Añadir
                                </button>
                            </div>
                            <div class="allergy-tags" id="allergyTags"></div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2 class="section-title">
                            <i class="fas fa-leaf"></i>
                            Tipo de Dieta
                        </h2>
                        <div class="diet-options">
                            <div class="diet-card" data-diet="omnivore">
                                <i class="fas fa-utensils"></i>
                                <h3>Omnívora</h3>
                            </div>
                            <div class="diet-card" data-diet="vegetarian">
                                <i class="fas fa-carrot"></i>
                                <h3>Vegetariana</h3>
                            </div>
                            <div class="diet-card" data-diet="vegan">
                                <i class="fas fa-seedling"></i>
                                <h3>Vegana</h3>
                            </div>
                        </div>
                    </div>

                    <div class="btn-container">
                        <button type="submit" class="btn btn-primary">Crear Cuenta</button>
                    </div>
                </form>
            </div>

            <!-- App Container -->
            <div class="app-container" id="appContainer">
                <!-- BMI Calculator Section -->
                <div class="bmi-calculator" id="bmiCalculator">
                    <div class="bmi-header">
                        <h2>Calculadora de IMC</h2>
                        <p>Conoce tu Índice de Masa Corporal y recibe recomendaciones personalizadas</p>
                    </div>

                    <div class="bmi-inputs">
                        <div class="bmi-input-group">
                            <label for="bmiWeight">Peso</label>
                            <div style="position: relative;">
                                <input type="number" id="bmiWeight" placeholder="70" step="0.1" min="1">
                                <span class="unit">kg</span>
                            </div>
                        </div>
                        <div class="bmi-input-group">
                            <label for="bmiHeight">Altura</label>
                            <div style="position: relative;">
                                <input type="number" id="bmiHeight" placeholder="175" min="1">
                                <span class="unit">cm</span>
                            </div>
                        </div>
                    </div>

                    <div class="bmi-result" id="bmiResult" style="display: none;">
                        <div class="bmi-value" id="bmiValue">24.2</div>
                        <div class="bmi-category" id="bmiCategory">Peso Normal</div>
                        <div class="bmi-description" id="bmiDescription">
                            Tu IMC se encuentra dentro del rango saludable. Sigue manteniendo buenos hábitos alimenticios y realiza actividad física regular.
                        </div>
                    </div>

                    <div class="bmi-chart-container">
                        <h3 class="bmi-chart-title">Visualización de tu IMC</h3>
                        <canvas id="bmiChart" width="400" height="200"></canvas>
                    </div>

                    <div class="bmi-recommendations">
                        <h3>Recomendaciones Personalizadas</h3>
                        <div class="recommendation-grid" id="recommendationGrid">
                            <!-- Recommendations will be added dynamically -->
                        </div>
                    </div>
                </div>

                <div class="scanner-container">
                    <!-- Scanner Section -->
                    <div class="scanner-section">
                        <div class="scanner-header">
                            <h2>Escáner de Productos</h2>
                            <p>Escanea el código de barras para obtener información nutricional</p>
                        </div>

                        <div class="scanner-modes">
                            <button class="mode-btn active" id="cameraModeBtn">
                                <i class="fas fa-camera"></i> Cámara
                            </button>
                            <button class="mode-btn" id="manualModeBtn">
                                <i class="fas fa-keyboard"></i> Manual
                            </button>
                        </div>

                        <div class="scanner-area">
                            <!-- Camera View -->
                            <div class="camera-view" id="cameraView">
                                <div id="camera-container"></div>
                                <div class="camera-overlay">
                                    <div class="scan-region">
                                        <div class="scan-line"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Manual Input -->
                            <i class="fas fa-barcode scanner-icon" id="scannerIcon"></i>
                            <p class="scanner-text" id="scannerText">Usa la cámara para escanear el código de barras</p>
                            
                            <input type="text" class="barcode-input" id="barcodeInput" placeholder="Ej: 1234567890123">
                            
                            <button class="scan-btn" id="scanBtn">
                                <i class="fas fa-camera"></i> <span id="scanBtnText">Iniciar Cámara</span>
                            </button>

                            <div class="camera-controls" id="cameraControls">
                                <button class="camera-btn start-camera" id="startCameraBtn">
                                    <i class="fas fa-play"></i> Iniciar
                                </button>
                                <button class="camera-btn stop-camera" id="stopCameraBtn">
                                    <i class="fas fa-stop"></i> Detener
                                </button>
                            </div>
                        </div>

                        <div class="recent-scans">
                            <h3>Escaneos Recientes</h3>
                            <div class="scan-history" id="scanHistory">
                                <div class="scan-item" data-barcode="1234567890123">
                                    <span class="scan-item-name">Yogur Natural</span>
                                    <span class="scan-item-date">Hace 2 horas</span>
                                </div>
                                <div class="scan-item" data-barcode="2345678901234">
                                    <span class="scan-item-name">Cereal Integral</span>
                                    <span class="scan-item-date">Ayer</span>
                                </div>
                                <div class="scan-item" data-barcode="3456789012345">
                                    <span class="scan-item-name">Leche Deslactosada</span>
                                    <span class="scan-item-date">Hace 3 días</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product Information Section -->
                    <div class="product-section" id="productSection">
                        <div class="product-header">
                            <div class="product-image">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="product-title">
                                <h2 id="productName">Nombre del Producto</h2>
                                <p id="productBrand">Marca</p>
                            </div>
                            <div class="status-badge" id="statusBadge">Apto</div>
                        </div>

                        <div class="product-tabs">
                            <button class="tab-btn active" data-tab="nutrition">Nutrición</button>
                            <button class="tab-btn" data-tab="ingredients">Ingredientes</button>
                            <button class="tab-btn" data-tab="alternatives">Alternativas</button>
                        </div>

                        <!-- Nutrition Tab -->
                        <div class="tab-content active" id="nutrition-tab">
                            <div class="allergy-alert" id="allergyAlert" style="display: none;">
                                <i class="fas fa-exclamation-triangle"></i>
                                <p>Este producto contiene ingredientes que pueden ser perjudiciales para ti</p>
                            </div>

                            <div class="nutrition-grid">
                                <div class="nutrition-item">
                                    <span class="nutrition-label">Calorías</span>
                                    <span class="nutrition-value" id="calories">120 kcal</span>
                                </div>
                                <div class="nutrition-item">
                                    <span class="nutrition-label">Grasas</span>
                                    <span class="nutrition-value" id="fat">3.5 g</span>
                                </div>
                                <div class="nutrition-item">
                                    <span class="nutrition-label">Carbohidratos</span>
                                    <span class="nutrition-value" id="carbs">15 g</span>
                                </div>
                                <div class="nutrition-item">
                                    <span class="nutrition-label">Proteínas</span>
                                    <span class="nutrition-value" id="protein">8 g</span>
                                </div>
                                <div class="nutrition-item">
                                    <span class="nutrition-label">Fibra</span>
                                    <span class="nutrition-value" id="fiber">2 g</span>
                                </div>
                                <div class="nutrition-item">
                                    <span class="nutrition-label">Azúcar</span>
                                    <span class="nutrition-value" id="sugar">12 g</span>
                                </div>
                                <div class="nutrition-item">
                                    <span class="nutrition-label">Sodio</span>
                                    <span class="nutrition-value" id="sodium">50 mg</span>
                                </div>
                                <div class="nutrition-item">
                                    <span class="nutrition-label">Colesterol</span>
                                    <span class="nutrition-value" id="cholesterol">5 mg</span>
                                </div>
                            </div>
                        </div>

                        <!-- Ingredients Tab -->
                        <div class="tab-content" id="ingredients-tab">
                            <div class="ingredients-list">
                                <h4>Lista de Ingredientes</h4>
                                <div id="ingredientsList">
                                    <!-- Ingredients will be added here dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- Alternatives Tab -->
                        <div class="tab-content" id="alternatives-tab">
                            <div class="alternatives-section">
                                <h3>Productos Alternativos Recomendados</h3>
                                <div class="alternatives-grid" id="alternativesGrid">
                                    <!-- Alternatives will be added here dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Camera Permission Modal -->
    <div class="camera-permission-overlay" id="cameraPermissionOverlay">
        <div class="permission-modal">
            <i class="fas fa-camera"></i>
            <h3>Permiso de Cámara Requerido</h3>
            <p>Para escanear códigos de barras, necesitamos acceso a tu cámara. Por favor, permite el acceso cuando se te solicite.</p>
            <button class="permission-btn" id="requestPermissionBtn">Entendido</button>
        </div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <div>
            <h4 id="notificationTitle">¡Éxito!</h4>
            <p id="notificationMessage">Tu cuenta ha sido creada correctamente.</p>
        </div>
    </div>

    <script>
        // Product Database (Mock)
        const productDatabase = {
            "1234567890123": {
                name: "Yogur Natural",
                brand: "Alpina",
                status: "safe",
                nutrition: {
                    calories: "120 kcal",
                    fat: "3.5 g",
                    carbs: "15 g",
                    protein: "8 g",
                    fiber: "0 g",
                    sugar: "12 g",
                    sodium: "50 mg",
                    cholesterol: "5 mg"
                },
                ingredients: ["Leche", "Cultivos lácteos activos", "Azúcar", "Estabilizantes"],
                allergens: ["lactose"],
                alternatives: [
                    { name: "Yogur de Almendras", brand: "Alpro", type: "vegetal" },
                    { name: "Yogur de Coco", brand: "So Delicious", type: "vegetal" }
                ]
            },
            "2345678901234": {
                name: "Cereal Integral",
                brand: "Kellogg's",
                status: "warning",
                nutrition: {
                    calories: "180 kcal",
                    fat: "2 g",
                    carbs: "35 g",
                    protein: "5 g",
                    fiber: "4 g",
                    sugar: "8 g",
                    sodium: "200 mg",
                    cholesterol: "0 mg"
                },
                ingredients: ["Avena integral", "Trigo", "Azúcar", "Miel", "Frutos secos", "Sal"],
                allergens: ["gluten", "nuts"],
                alternatives: [
                    { name: "Cereal Sin Gluten", brand: "Nature's Path", type: "gluten-free" },
                    { name: "Granola Vegana", brand: "Purely Elizabeth", type: "vegan" }
                ]
            },
            "3456789012345": {
                name: "Leche Deslactosada",
                brand: "Colanta",
                status: "safe",
                nutrition: {
                    calories: "90 kcal",
                    fat: "2.5 g",
                    carbs: "12 g",
                    protein: "8 g",
                    fiber: "0 g",
                    sugar: "12 g",
                    sodium: "60 mg",
                    cholesterol: "10 mg"
                },
                ingredients: ["Leche", "Lactasa", "Vitamina D", "Vitamina A"],
                allergens: [],
                alternatives: [
                    { name: "Leche de Avena", brand: "Oatly", type: "vegetal" },
                    { name: "Leche de Soja", brand: "Soy Fresh", type: "vegetal" }
                ]
            },
            "4567890123456": {
                name: "Galletas de Chocolate",
                brand: "Gamesa",
                status: "danger",
                nutrition: {
                    calories: "220 kcal",
                    fat: "10 g",
                    carbs: "30 g",
                    protein: "2 g",
                    fiber: "1 g",
                    sugar: "15 g",
                    sodium: "150 mg",
                    cholesterol: "0 mg"
                },
                ingredients: ["Harina de trigo", "Azúcar", "Grasa vegetal", "Cacao", "Leche", "Huevo", "Frutos secos"],
                allergens: ["gluten", "lactose", "eggs", "nuts"],
                alternatives: [
                    { name: "Galletas Sin Gluten", brand: "Schär", type: "gluten-free" },
                    { name: "Galletas Veganas", brand: "Nairn's", type: "vegan" }
                ]
            }
        };

        // Global variables
        let userData = {
            firstName: '',
            lastName: '',
            email: '',
            weight: 0,
            height: 0,
            age: 0,
            gender: '',
            allergies: [],
            otherAllergies: []
        };

        let currentScanMode = 'camera'; // 'camera' or 'manual'
        let cameraActive = false;
        let quaggaInitialized = false;
        let bmiChart = null;

        // DOM Elements
        const registrationContainer = document.getElementById('registrationContainer');
        const appContainer = document.getElementById('appContainer');
        const registrationForm = document.getElementById('registrationForm');
        const userInfo = document.getElementById('userInfo');
        const userName = document.getElementById('userName');
        const userAvatar = document.getElementById('userAvatar');
        const productSection = document.getElementById('productSection');
        const barcodeInput = document.getElementById('barcodeInput');
        const scanBtn = document.getElementById('scanBtn');
        const notification = document.getElementById('notification');
        const notificationTitle = document.getElementById('notificationTitle');
        const notificationMessage = document.getElementById('notificationMessage');
        const cameraView = document.getElementById('cameraView');
        const cameraControls = document.getElementById('cameraControls');
        const scannerIcon = document.getElementById('scannerIcon');
        const scannerText = document.getElementById('scannerText');
        const scanBtnText = document.getElementById('scanBtnText');
        const cameraModeBtn = document.getElementById('cameraModeBtn');
        const manualModeBtn = document.getElementById('manualModeBtn');
        const startCameraBtn = document.getElementById('startCameraBtn');
        const stopCameraBtn = document.getElementById('stopCameraBtn');
        const cameraPermissionOverlay = document.getElementById('cameraPermissionOverlay');
        const requestPermissionBtn = document.getElementById('requestPermissionBtn');

        // BMI Calculator Elements
        const bmiCalculator = document.getElementById('bmiCalculator');
        const bmiWeight = document.getElementById('bmiWeight');
        const bmiHeight = document.getElementById('bmiHeight');
        const bmiResult = document.getElementById('bmiResult');
        const bmiValue = document.getElementById('bmiValue');
        const bmiCategory = document.getElementById('bmiCategory');
        const bmiDescription = document.getElementById('bmiDescription');
        const recommendationGrid = document.getElementById('recommendationGrid');

        // Diet card selection
        const dietCards = document.querySelectorAll('.diet-card');
        dietCards.forEach(card => {
            card.addEventListener('click', function() {
                dietCards.forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        // Add allergy functionality
        const addAllergyBtn = document.getElementById('addAllergyBtn');
        const otherAllergiesInput = document.getElementById('otherAllergies');
        const allergyTags = document.getElementById('allergyTags');
        const allergies = [];

        addAllergyBtn.addEventListener('click', function() {
            const allergyValue = otherAllergiesInput.value.trim();
            if (allergyValue && !allergies.includes(allergyValue)) {
                allergies.push(allergyValue);
                renderAllergyTags();
                otherAllergiesInput.value = '';
            }
        });

        otherAllergiesInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                addAllergyBtn.click();
            }
        });

        function renderAllergyTags() {
            allergyTags.innerHTML = '';
            allergies.forEach((allergy, index) => {
                const tag = document.createElement('div');
                tag.className = 'allergy-tag';
                tag.innerHTML = `
                    ${allergy}
                    <i class="fas fa-times" data-index="${index}"></i>
                `;
                allergyTags.appendChild(tag);
            });

            document.querySelectorAll('.allergy-tag i').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = this.getAttribute('data-index');
                    allergies.splice(index, 1);
                    renderAllergyTags();
                });
            });
        }

        // BMI Calculator Functions
        function calculateBMI(weight, height) {
            const heightInMeters = height / 100;
            return weight / (heightInMeters * heightInMeters);
        }

        function getBMICategory(bmi) {
            if (bmi < 18.5) {
                return {
                    category: 'Bajo Peso',
                    description: 'Tu IMC está por debajo del rango saludable. Considera consultar con un nutricionista para alcanzar un peso adecuado.',
                    color: '#3498db',
                    recommendations: [
                        { icon: 'fa-utensils', title: 'Aumenta tu ingesta calórica', desc: 'Consume alimentos más densos en nutrientes' },
                        { icon: 'fa-dumbbell', title: 'Ejercicios de fuerza', desc: 'Desarrolla masa muscular de forma saludable' },
                        { icon: 'fa-apple-alt', title: 'Snacks nutritivos', desc: 'Frutos secos, aguacate y lácteos enteros' }
                    ]
                };
            } else if (bmi >= 18.5 && bmi < 25) {
                return {
                    category: 'Peso Normal',
                    description: 'Tu IMC se encuentra dentro del rango saludable. Sigue manteniendo buenos hábitos alimenticios y realiza actividad física regular.',
                    color: '#2ecc71',
                    recommendations: [
                        { icon: 'fa-running', title: 'Mantén la actividad física', desc: '150 minutos de ejercicio moderado por semana' },
                        { icon: 'fa-balance-scale', title: 'Equilibrio nutricional', desc: 'Varía tu dieta con todos los grupos alimenticios' },
                        { icon: 'fa-heart', title: 'Salud cardiovascular', desc: 'Monitorea tu presión y colesterol regularmente' }
                    ]
                };
            } else if (bmi >= 25 && bmi < 30) {
                return {
                    category: 'Sobrepeso',
                    description: 'Tu IMC está por encima del rango saludable. Pequeños cambios en tu estilo de vida pueden marcar una gran diferencia.',
                    color: '#f39c12',
                    recommendations: [
                        { icon: 'fa-walking', title: 'Aumenta la actividad', desc: 'Caminar 30 minutos diarios es un excelente inicio' },
                        { icon: 'fa-carrot', title: 'Reduce calorías', desc: 'Corta 500 calorías diarias para perder 0.5kg por semana' },
                        { icon: 'fa-glass-water', title: 'Hidratación', desc: 'Bebe agua antes de las comidas para sentirte más lleno' }
                    ]
                };
            } else {
                return {
                    category: 'Obesidad',
                    description: 'Tu IMC indica obesidad. Es importante que consultes con un profesional de la salud para crear un plan seguro y efectivo.',
                    color: '#e74c3c',
                    recommendations: [
                        { icon: 'fa-user-md', title: 'Consulta médica', desc: 'Busca orientación profesional para tu salud' },
                        { icon: 'fa-chart-line', title: 'Plan gradual', desc: 'Establece metas realistas y alcanzables' },
                        { icon: 'fa-users', title: 'Apoyo social', desc: 'Únete a grupos de apoyo o busca un compañero' }
                    ]
                };
            }
        }

        function updateBMI() {
            const weight = parseFloat(bmiWeight.value);
            const height = parseFloat(bmiHeight.value);

            if (weight > 0 && height > 0) {
                const bmi = calculateBMI(weight, height);
                const bmiData = getBMICategory(bmi);

                // Update BMI display
                bmiValue.textContent = bmi.toFixed(1);
                bmiCategory.textContent = bmiData.category;
                bmiDescription.textContent = bmiData.description;
                bmiResult.style.display = 'block';
                bmiResult.style.background = `linear-gradient(135deg, ${bmiData.color} 0%, ${bmiData.color}dd 100%)`;

                // Update recommendations
                recommendationGrid.innerHTML = '';
                bmiData.recommendations.forEach(rec => {
                    const card = document.createElement('div');
                    card.className = 'recommendation-card';
                    card.innerHTML = `
                        <i class="fas ${rec.icon}"></i>
                        <h4>${rec.title}</h4>
                        <p>${rec.desc}</p>
                    `;
                    recommendationGrid.appendChild(card);
                });

                // Update chart
                updateBMIChart(bmi, bmiData.color);
            }
        }

        function updateBMIChart(userBMI, color) {
            const ctx = document.getElementById('bmiChart').getContext('2d');
            
            if (bmiChart) {
                bmiChart.destroy();
            }

            bmiChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Bajo Peso', 'Normal', 'Sobrepeso', 'Obesidad'],
                    datasets: [{
                        label: 'Rangos de IMC',
                        data: [18.5, 21.75, 27.5, 35],
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.2)',
                            'rgba(46, 204, 113, 0.2)',
                            'rgba(243, 156, 18, 0.2)',
                            'rgba(231, 76, 60, 0.2)'
                        ],
                        borderColor: [
                            'rgba(52, 152, 219, 1)',
                            'rgba(46, 204, 113, 1)',
                            'rgba(243, 156, 18, 1)',
                            'rgba(231, 76, 60, 1)'
                        ],
                        borderWidth: 2
                    }, {
                        label: 'Tu IMC',
                        data: [userBMI, null, null, null],
                        backgroundColor: color,
                        borderColor: color,
                        borderWidth: 3,
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 40,
                            title: {
                                display: true,
                                text: 'IMC'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 1) {
                                        return `Tu IMC: ${userBMI.toFixed(1)}`;
                                    }
                                    return `Rango: ${context.label}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // BMI Input Event Listeners
        bmiWeight.addEventListener('input', updateBMI);
        bmiHeight.addEventListener('input', updateBMI);

        // Form submission
        registrationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            userData.firstName = document.getElementById('firstName').value;
            userData.lastName = document.getElementById('lastName').value;
            userData.email = document.getElementById('email').value;
            userData.weight = parseFloat(document.getElementById('weight').value);
            userData.height = parseFloat(document.getElementById('height').value);
            userData.age = parseInt(document.getElementById('age').value);
            userData.gender = document.getElementById('gender').value;
            userData.allergies = Array.from(document.querySelectorAll('input[name="allergies"]:checked')).map(cb => cb.value);
            userData.otherAllergies = allergies;

            // Update user info in header
            userName.textContent = `${userData.firstName} ${userData.lastName}`;
            userAvatar.textContent = userData.firstName.charAt(0).toUpperCase();
            userInfo.style.display = 'flex';

            // Update BMI calculator with user data
            bmiWeight.value = userData.weight;
            bmiHeight.value = userData.height;
            updateBMI();

            // Show success notification
            showNotification('¡Registro Exitoso!', 'Tu cuenta ha sido creada correctamente.', 'success');
            
            // Switch to app view after a delay
            setTimeout(() => {
                registrationContainer.style.display = 'none';
                appContainer.classList.add('active');
            }, 2000);
        });

        // Scanner mode switching
        cameraModeBtn.addEventListener('click', function() {
            currentScanMode = 'camera';
            cameraModeBtn.classList.add('active');
            manualModeBtn.classList.remove('active');
            
            cameraView.classList.add('active');
            barcodeInput.classList.remove('active');
            scannerIcon.style.display = 'block';
            scannerText.textContent = 'Usa la cámara para escanear el código de barras';
            scanBtnText.textContent = 'Iniciar Cámara';
            scanBtn.innerHTML = '<i class="fas fa-camera"></i> <span id="scanBtnText">Iniciar Cámara</span>';
            
            if (cameraActive) {
                cameraControls.classList.add('active');
            }
        });

        manualModeBtn.addEventListener('click', function() {
            currentScanMode = 'manual';
            manualModeBtn.classList.add('active');
            cameraModeBtn.classList.remove('active');
            
            cameraView.classList.remove('active');
            barcodeInput.classList.add('active');
            scannerIcon.style.display = 'none';
            scannerText.textContent = 'Ingresa el código de barras del producto';
            scanBtnText.textContent = 'Escanear Producto';
            scanBtn.innerHTML = '<i class="fas fa-search"></i> <span id="scanBtnText">Escanear Producto</span>';
            cameraControls.classList.remove('active');
            
            if (cameraActive) {
                stopCamera();
            }
        });

        // Camera functionality
        scanBtn.addEventListener('click', function() {
            if (currentScanMode === 'camera') {
                if (!cameraActive) {
                    requestCameraPermission();
                } else {
                    stopCamera();
                }
            } else {
                const barcode = barcodeInput.value.trim();
                if (barcode) {
                    scanProduct(barcode);
                } else {
                    showNotification('Error', 'Por favor ingresa un código de barras válido', 'error');
                }
            }
        });

        barcodeInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                scanBtn.click();
            }
        });

        startCameraBtn.addEventListener('click', function() {
            startCamera();
        });

        stopCameraBtn.addEventListener('click', function() {
            stopCamera();
        });

        requestPermissionBtn.addEventListener('click', function() {
            cameraPermissionOverlay.classList.remove('active');
            startCamera();
        });

        function requestCameraPermission() {
            cameraPermissionOverlay.classList.add('active');
        }

        function startCamera() {
            // Check for camera support
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                showNotification('Error', 'Tu navegador no soporta acceso a la cámara', 'error');
                return;
            }

            navigator.mediaDevices.getUserMedia({ 
                video: { 
                    facingMode: 'environment',
                    width: { ideal: 1280 },
                    height: { ideal: 720 }
                } 
            })
                .then(function(stream) {
                    cameraActive = true;
                    const video = document.createElement('video');
                    video.srcObject = stream;
                    video.setAttribute('playsinline', true);
                    video.play();
                    
                    const container = document.getElementById('camera-container');
                    container.innerHTML = '';
                    container.appendChild(video);
                    
                    cameraControls.classList.add('active');
                    scanBtn.innerHTML = '<i class="fas fa-stop"></i> <span id="scanBtnText">Detener Cámara</span>';
                    
                    // Initialize Quagga
                    Quagga.init({
                        inputStream: {
                            name: "Live",
                            type: "LiveStream",
                            target: video,
                            constraints: {
                                width: 640,
                                height: 480,
                                facingMode: "environment"
                            }
                        },
                        locator: {
                            patchSize: "medium",
                            halfSample: true
                        },
                        numOfWorkers: navigator.hardwareConcurrency || 4,
                        decoder: {
                            readers: ["ean_reader", "ean_8_reader", "code_128_reader", "code_39_reader", "upc_reader", "upc_e_reader"]
                        },
                        locate: true
                    }, function(err) {
                        if (err) {
                            console.error(err);
                            showNotification('Error de Cámara', 'No se pudo inicializar la cámara', 'error');
                            stopCamera();
                            return;
                        }
                        Quagga.start();
                    });
                    
                    Quagga.onDetected(function(result) {
                        const code = result.codeResult.code;
                        if (code) {
                            stopCamera();
                            scanProduct(code);
                        }
                    });
                })
                .catch(function(err) {
                    console.error(err);
                    showNotification('Error de Permiso', 'No se pudo acceder a la cámara. Por favor, verifica los permisos.', 'error');
                });
        }

        function stopCamera() {
            cameraActive = false;
            Quagga.stop();
            
            const container = document.getElementById('camera-container');
            const video = container.querySelector('video');
            if (video && video.srcObject) {
                video.srcObject.getTracks().forEach(track => track.stop());
            }
            container.innerHTML = '';
            
            cameraControls.classList.remove('active');
            scanBtn.innerHTML = '<i class="fas fa-camera"></i> <span id="scanBtnText">Iniciar Cámara</span>';
        }

        // Recent scans click handlers
        document.querySelectorAll('.scan-item').forEach(item => {
            item.addEventListener('click', function() {
                const barcode = this.getAttribute('data-barcode');
                if (currentScanMode === 'manual') {
                    barcodeInput.value = barcode;
                }
                scanProduct(barcode);
            });
        });

        function scanProduct(barcode) {
            const product = productDatabase[barcode];
            
            if (product) {
                displayProduct(product);
                productSection.classList.add('active');
                
                // Add to scan history
                addToScanHistory(product, barcode);
                
                showNotification('Producto Encontrado', `Se ha cargado la información de ${product.name}`, 'success');
            } else {
                showNotification('Producto No Encontrado', 'Este producto no está en nuestra base de datos', 'error');
            }
        }

        function displayProduct(product) {
            // Update product info
            document.getElementById('productName').textContent = product.name;
            document.getElementById('productBrand').textContent = product.brand;
            
            // Update status badge
            const statusBadge = document.getElementById('statusBadge');
            statusBadge.className = 'status-badge';
            
            if (product.status === 'safe') {
                statusBadge.classList.add('status-safe');
                statusBadge.textContent = 'Apto';
                document.getElementById('allergyAlert').style.display = 'none';
            } else if (product.status === 'warning') {
                statusBadge.classList.add('status-warning');
                statusBadge.textContent = 'Con Precaución';
                document.getElementById('allergyAlert').style.display = 'flex';
            } else if (product.status === 'danger') {
                statusBadge.classList.add('status-danger');
                statusBadge.textContent = 'No Apto';
                document.getElementById('allergyAlert').style.display = 'flex';
            }
            
            // Update nutrition info
            document.getElementById('calories').textContent = product.nutrition.calories;
            document.getElementById('fat').textContent = product.nutrition.fat;
            document.getElementById('carbs').textContent = product.nutrition.carbs;
            document.getElementById('protein').textContent = product.nutrition.protein;
            document.getElementById('fiber').textContent = product.nutrition.fiber;
            document.getElementById('sugar').textContent = product.nutrition.sugar;
            document.getElementById('sodium').textContent = product.nutrition.sodium;
            document.getElementById('cholesterol').textContent = product.nutrition.cholesterol;
            
            // Update ingredients
            const ingredientsList = document.getElementById('ingredientsList');
            ingredientsList.innerHTML = '';
            
            product.ingredients.forEach(ingredient => {
                const tag = document.createElement('span');
                tag.className = 'ingredient-tag';
                
                // Check if ingredient is an allergen for user
                const isAllergen = userData.allergies.some(allergy => 
                    ingredient.toLowerCase().includes(allergy.toLowerCase())
                ) || userData.otherAllergies.some(allergy => 
                    ingredient.toLowerCase().includes(allergy.toLowerCase())
                );
                
                if (isAllergen) {
                    tag.classList.add('allergen');
                }
                
                tag.textContent = ingredient;
                ingredientsList.appendChild(tag);
            });
            
            // Update alternatives
            const alternativesGrid = document.getElementById('alternativesGrid');
            alternativesGrid.innerHTML = '';
            
            product.alternatives.forEach(alternative => {
                const card = document.createElement('div');
                card.className = 'alternative-card';
                card.innerHTML = `
                    <div style="width: 80px; height: 80px; border-radius: 15px; background: var(--gradient-5); display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                        <i class="fas fa-box" style="font-size: 2.5rem; color: var(--white);"></i>
                    </div>
                    <h4>${alternative.name}</h4>
                    <p>${alternative.brand}</p>
                    <p style="font-size: 0.85rem; color: var(--accent-color); font-weight: 500;">${alternative.type}</p>
                `;
                alternativesGrid.appendChild(card);
            });
            
            // Reset to nutrition tab
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelector('[data-tab="nutrition"]').classList.add('active');
            document.getElementById('nutrition-tab').classList.add('active');
        }

        function addToScanHistory(product, barcode) {
            const scanHistory = document.getElementById('scanHistory');
            
            // Check if product is already in history
            const existingItem = document.querySelector(`[data-barcode="${barcode}"]`);
            if (existingItem) {
                existingItem.remove();
            }
            
            // Add new item at top
            const newItem = document.createElement('div');
            newItem.className = 'scan-item';
            newItem.setAttribute('data-barcode', barcode);
            newItem.innerHTML = `
                <span class="scan-item-name">${product.name}</span>
                <span class="scan-item-date">Ahora</span>
            `;
            
            scanHistory.insertBefore(newItem, scanHistory.firstChild);
            
            // Limit history to 5 items
            while (scanHistory.children.length > 5) {
                scanHistory.removeChild(scanHistory.lastChild);
            }
            
            // Add click handler
            newItem.addEventListener('click', function() {
                if (currentScanMode === 'manual') {
                    barcodeInput.value = barcode;
                }
                scanProduct(barcode);
            });
        }

        // Tab functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                
                // Update active tab button
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Update active tab content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`${tabName}-tab`).classList.add('active');
            });
        });

        // Notification function
        function showNotification(title, message, type) {
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'flex';
            
            // Change icon based on type
            const icon = notification.querySelector('i');
            if (type === 'success') {
                icon.className = 'fas fa-check-circle';
            } else if (type === 'error') {
                icon.className = 'fas fa-exclamation-circle';
            }
            
            // Hide notification after 5 seconds
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        // Add some interactive animations
        document.addEventListener('DOMContentLoaded', function() {
            // Animate elements on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe all sections
            document.querySelectorAll('.form-section, .scanner-section, .product-section, .bmi-calculator').forEach(section => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(20px)';
                section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(section);
            });
        });
    </script>
</body>
</html>